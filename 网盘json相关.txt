面试官：你的网盘项目使用了json技术，为什么要使用，怎么使用的？

回答：首先二进制协议比较依赖编译环境，比如32位/64位结构体大小不一样，传数据容易乱，但是json是文本格式，不管什么环境，按键读就行，不会错。
其次就是传输复杂信息方便。比如分享下载时，要给客户端发文件id+名字+总大小，二进制就需要定义专门的结构体；而json直接写字段的赋值就可以，相加字段直接加键就可以，不需要改协议。
然后Redis缓存也能看懂。这个项目用Redis缓存分享码信息，二进制存进去没法直接看（得解码）；json存进去，用工具能直接看到文件路径是什么，什么时候过期，调试更方便。

项目中使用json技术主要是在分享文件相关功能用吧。因为大文件传输还是得用二进制，不然慢。、
首先分享下载方面呢，就是服务器发json，客户端解json。其实这过程就是json的序列化和反序列化，服务器把文件id、文件名字等数据转换成json字符串（序列化）发出去，客户端收到后再把json字符串转成自己能操作的变量（反序列化）。

首先第一步：发送




面试官： Redis 缓存能看懂：项目用 Redis 存分享码信息，二进制存进去没法直接看（得解码）；JSON 存进去，用工具查能直接看到 “文件路径是啥、啥时候过期”，调试时不用猜。
这样不会更不安全吗？

回答：
这个担心很合理 ——JSON 的 “可读性” 确实意味着 “能直接看到内容”，但项目里通过 3 个关键设计，把这种 “可见性” 的安全风险降到了最低，不会真的导致安全问题：

首先，Redis 本身有访问权限控制：项目里的 Redis 不是公网可访问的，只有服务器能通过内网连接（比如绑定服务器本地 IP，设密码），外人根本连不上 Redis，就算 JSON 能看懂，也没机会看到 —— 相当于 “家里的账本是手写的（易看懂），但家门锁得很严，外人进不来”，基础安全有保障。

其次，分享码是 “短期随机 + 唯一” 的：JSON 里存的信息（文件路径、ID）是和 “4 位随机分享码” 绑定的，而分享码 24 小时就过期（Redis 自动删），就算有人碰巧拿到一个分享码、看到了 JSON 里的路径，过一天也失效了；而且 4 位分享码是随机的（数字 + 字母），想猜中有效码很难，相当于 “账本里的内容只对当天的临时钥匙有效，钥匙过期或不对，内容再懂也没用”。

最后，JSON 里只存 “非敏感的关联信息”：就算真被看到，JSON 里只有 “文件 ID、服务器内部路径、过期时间”，没有文件内容（文件内容要通过下载流程才能拿到，还得校验分享码），也没有用户密码、隐私数据；而且服务器内部路径（比如 “C:/data/123.pdf”）只是服务器本地地址，外人就算知道这个路径，也没法直接访问服务器的文件 —— 相当于 “账本里记的是‘仓库 123 号货架’，不是‘仓库大门钥匙’，知道货架号也拿不到东西”。

简单说：JSON 的 “易看懂” 主要是为了方便自己调试，而安全靠 “Redis 锁门 + 分享码限时 + 只存无关痛痒的信息” 来保障，两者不冲突。
